# Symbolic Regression Configuration - V3
# Uses 8 Control Points for realistic rose petal shape
# Based on rose_petals.jpg reference

general:
  niterations: 100
  populations: 20
  population_size: 33
  model_selection: "best"
  verbosity: 1

# Category-specific configurations
categories:
  petal_spline_v3:
    description: "8 Control Points - Heart-shaped tip with notch"
    features:
      - base_size
      - layer_index
      - petal_index
      - opening_degree
    targets:
      # 8 Control Points (16 values)
      - cp1_x  # base_left
      - cp1_y
      - cp2_x  # lower_left
      - cp2_y
      - cp3_x  # upper_left
      - cp3_y
      - cp4_x  # tip_left
      - cp4_y
      - cp5_x  # tip_center
      - cp5_y
      - cp6_x  # tip_right
      - cp6_y
      - cp7_x  # upper_right
      - cp7_y
      - cp8_x  # lower_right
      - cp8_y
      - extrude_depth
    operators:
      binary: ["+", "-", "*", "/"]
      unary: ["sqrt", "log", "sin", "cos"]
    constraints:
      maxsize: 20

  bone_rigging_v5:
    description: "7 Bones - Fishbone structure (3 spine + 4 ribs)"
    features:
      - petal_height
      - petal_width
      - opening_degree
      - layer_index
      - curvature_intensity
    targets:
      # Central Spine (3 bones)
      - bone_root_start_x
      - bone_root_start_y
      - bone_root_end_x
      - bone_root_end_y
      - bone_middle_start_x
      - bone_middle_start_y
      - bone_middle_end_x
      - bone_middle_end_y
      - bone_tip_start_x
      - bone_tip_start_y
      - bone_tip_end_x
      - bone_tip_end_y
      # Left Ribs (2 bones)
      - bone_left_lower_start_x
      - bone_left_lower_start_y
      - bone_left_lower_end_x
      - bone_left_lower_end_y
      - bone_left_upper_start_x
      - bone_left_upper_start_y
      - bone_left_upper_end_x
      - bone_left_upper_end_y
      # Right Ribs (2 bones)
      - bone_right_lower_start_x
      - bone_right_lower_start_y
      - bone_right_lower_end_x
      - bone_right_lower_end_y
      - bone_right_upper_start_x
      - bone_right_upper_start_y
      - bone_right_upper_end_x
      - bone_right_upper_end_y
    operators:
      binary: ["+", "-", "*", "/"]
      unary: ["sqrt", "log", "sin", "cos"]
    constraints:
      maxsize: 20

  animation_wingflap:
    features:
      - base_size
      - petal_mass
      - wind_speed
      - flexibility
      - layer_index
    targets:
      - frequency
      - amplitude
      - axis_x
      - axis_y
      - axis_z
      - phase_offset
    operators:
      binary: ["+", "-", "*", "/"]
      unary: ["sqrt", "log", "sin", "cos", "exp"]
    constraints:
      maxsize: 18

# Quality thresholds
quality:
  min_r2_score: 0.90
  max_complexity: 20
  validation_split: 0.2

# Physical constraints for generated parameters
constraints:
  # Control point ranges
  cp_x:
    min: -5.0
    max: 5.0
  cp_y:
    min: 0.0
    max: 10.0
  # Other constraints
  extrude_depth:
    min: 0.001
    max: 0.5
  frequency:
    min: 1.0
    max: 50.0
  amplitude:
    min: 5.0
    max: 90.0

# V3 specific notes
notes:
  - "8 CPs capture realistic rose petal shape from reference image"
  - "Heart-shaped tip with notch (CP4, CP5, CP6)"
  - "Undulating edges for organic look (CP2, CP3, CP7, CP8)"
  - "Narrow base for natural stem attachment (CP1)"
