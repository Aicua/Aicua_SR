# Symbolic Regression Configuration - Bone Rigging V6
# 5 INDEPENDENT Bones for petal deformation
# No parent-child relationships - each bone can be rotated independently

general:
  niterations: 100
  populations: 20
  population_size: 33
  model_selection: "best"
  verbosity: 1

# Category-specific configurations
categories:
  bone_rigging_v6:
    description: "5 Independent Bones for petal deformation (no parent-child)"
    features:
      - base_size
      - layer_index
      - petal_index
      - opening_degree
      - deformation_type
      - intensity
    targets:
      # Bone Base (0% → 25%)
      - bone_base_start_x
      - bone_base_start_y
      - bone_base_end_x
      - bone_base_end_y
      # Bone Mid (25% → 45%)
      - bone_mid_start_x
      - bone_mid_start_y
      - bone_mid_end_x
      - bone_mid_end_y
      # Bone Mid Upper (45% → 62% - WIDEST)
      - bone_mid_upper_start_x
      - bone_mid_upper_start_y
      - bone_mid_upper_end_x
      - bone_mid_upper_end_y
      # Bone Upper (62% → 78%)
      - bone_upper_start_x
      - bone_upper_start_y
      - bone_upper_end_x
      - bone_upper_end_y
      # Bone Tip (78% → 100%)
      - bone_tip_start_x
      - bone_tip_start_y
      - bone_tip_end_x
      - bone_tip_end_y
    operators:
      binary: ["+", "-", "*", "/"]
      unary: ["sqrt", "log", "sin", "cos"]
    constraints:
      maxsize: 15

# Quality thresholds
quality:
  min_r2_score: 0.90
  max_complexity: 15
  validation_split: 0.2

# Physical constraints for generated parameters
constraints:
  bone_position_x:
    min: -3.0
    max: 3.0
  bone_position_y:
    min: 0.0
    max: 10.0

# Deformation types
deformation_types:
  0: "straight"
  1: "s_curve"
  2: "c_curve"
  3: "wave"

# V6 specific notes
notes:
  - "5 independent bones (no parent-child) for cleaner SR training"
  - "20 targets vs 48 targets in v5 (58% reduction)"
  - "Supports 4 deformation types: straight, s_curve, c_curve, wave"
  - "Each bone can be rotated independently without affecting others"
  - "Height zones: base (0-25%), mid (25-45%), mid_upper (45-62%), upper (62-78%), tip (78-100%)"
  - "Mid_upper zone (45-62%) is CRITICAL - controls widest region"

# Bone structure diagram
structure: |
  bone_tip (78%-100%)           → Controls tip & taper

  bone_upper (62%-78%)          → Controls upper region

  bone_mid_upper (45%-62%)      → Controls WIDEST region (critical)

  bone_mid (25%-45%)            → Controls middle expansion

  bone_base (0%-25%)            → Anchors base

# Example CLI output (no parent_bone commands)
example_cli: |
  create_armature petal_L1_P0_rig;
  add_bone petal_L1_P0_rig bone_base 0.0000 0.0000 0 0.0000 0.3072 0;
  add_bone petal_L1_P0_rig bone_mid 0.0000 0.3072 0 0.0000 0.5530 0;
  add_bone petal_L1_P0_rig bone_mid_upper 0.0000 0.5530 0 0.0000 0.7619 0;
  add_bone petal_L1_P0_rig bone_upper 0.0000 0.7619 0 0.0000 0.9585 0;
  add_bone petal_L1_P0_rig bone_tip 0.0000 0.9585 0 0.0000 1.2288 0;
  finalize_bones petal_L1_P0_rig;
  bind_armature petal_L1_P0_rig petal_L1_P0;
