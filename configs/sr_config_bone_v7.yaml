# Symbolic Regression Configuration - Bone Rigging V7
# 5 INDEPENDENT Bones - T-Shape Structure
# 3 vertical spine + 2 horizontal edge bones

general:
  niterations: 100
  populations: 20
  population_size: 33
  model_selection: "best"
  verbosity: 1

# Category-specific configurations
categories:
  bone_rigging_v7:
    description: "5 Independent Bones T-Shape (3 spine + 2 edge)"
    features:
      - base_size
      - layer_index
      - petal_index
      - opening_degree
      - deformation_type
      - intensity
    targets:
      # Bone Base (0% → 45%) - positions
      - bone_base_start_x
      - bone_base_start_y
      - bone_base_end_x
      - bone_base_end_y
      # Bone Mid (45% → 78%) - positions (connected to bone_base tail)
      - bone_mid_start_x
      - bone_mid_start_y
      - bone_mid_end_x
      - bone_mid_end_y
      # Bone Tip (78% → 100%) - positions
      - bone_tip_start_x
      - bone_tip_start_y
      - bone_tip_end_x
      - bone_tip_end_y
      # Bone Left (at 62%) - positions
      - bone_left_start_x
      - bone_left_start_y
      - bone_left_end_x
      - bone_left_end_y
      # Bone Right (at 62%) - positions
      - bone_right_start_x
      - bone_right_start_y
      - bone_right_end_x
      - bone_right_end_y
      # Bone Base - rotations (head mode: head fixed, tail rotates)
      - bone_base_head_rx
      - bone_base_head_ry
      - bone_base_head_rz
      - bone_base_tail_rx
      - bone_base_tail_ry
      - bone_base_tail_rz
      # Bone Mid - rotations
      - bone_mid_head_rx
      - bone_mid_head_ry
      - bone_mid_head_rz
      - bone_mid_tail_rx
      - bone_mid_tail_ry
      - bone_mid_tail_rz
      # Bone Tip - rotations
      - bone_tip_head_rx
      - bone_tip_head_ry
      - bone_tip_head_rz
      - bone_tip_tail_rx
      - bone_tip_tail_ry
      - bone_tip_tail_rz
      # Bone Left - rotations
      - bone_left_head_rx
      - bone_left_head_ry
      - bone_left_head_rz
      - bone_left_tail_rx
      - bone_left_tail_ry
      - bone_left_tail_rz
      # Bone Right - rotations
      - bone_right_head_rx
      - bone_right_head_ry
      - bone_right_head_rz
      - bone_right_tail_rx
      - bone_right_tail_ry
      - bone_right_tail_rz
    operators:
      binary: ["+", "-", "*", "/"]
      unary: ["sqrt", "log", "sin", "cos"]
    constraints:
      maxsize: 15

# Quality thresholds
quality:
  min_r2_score: 0.90
  max_complexity: 15
  validation_split: 0.2

# Physical constraints for generated parameters
constraints:
  bone_position_x:
    min: -3.0
    max: 3.0
  bone_position_y:
    min: 0.0
    max: 10.0

# Deformation types
deformation_types:
  0: "straight"
  1: "s_curve"
  2: "c_curve"
  3: "wave"

# V7 specific notes
notes:
  - "T-shape structure: 3 vertical spine + 2 horizontal edge bones"
  - "bone_left/bone_right at 62% (widest point) control edge curl"
  - "50 targets (5 bones × [4 coords + 6 rotations])"
  - "Supports 4 deformation types: straight, s_curve, c_curve, wave"
  - "Each bone has head and tail rotation modes"
  - "head mode: head fixed, tail rotates around head"
  - "tail mode: tail fixed, head rotates around tail"

# Bone structure diagram
structure: |
                      bone_tip (78%-100%)
                           |
                      bone_mid (45%-78%)
                           |
          bone_left ←── (62%) ──→ bone_right
                           |
                      bone_base (0%-45%)

  Connected spine: bone_base.tail → bone_mid.head → bone_tip.head

# Example CLI output with rotate_bone commands
example_cli: |
  create_armature petal_L1_P0_rig;
  add_bone petal_L1_P0_rig bone_base 0.0000 0.0000 0 0.0000 0.5530 0;
  add_bone petal_L1_P0_rig bone_mid 0.0000 0.5530 0 0.0000 0.9585 0;
  add_bone petal_L1_P0_rig bone_tip 0.0000 0.9585 0 0.0000 1.2288 0;
  add_bone petal_L1_P0_rig bone_left 0.0000 0.7619 0 -0.4800 0.7619 0;
  add_bone petal_L1_P0_rig bone_right 0.0000 0.7619 0 0.4800 0.7619 0;
  finalize_bones petal_L1_P0_rig;
  bind_armature petal_L1_P0_rig petal_L1_P0;
  # Deformation rotations (S-curve example)
  rotate_bone petal_L1_P0_rig bone_base 15 0 0 head;
  rotate_bone petal_L1_P0_rig bone_mid -25 0 0 head;
  rotate_bone petal_L1_P0_rig bone_tip 15 0 0 head;
  rotate_bone petal_L1_P0_rig bone_left 0 10 0 head;
  rotate_bone petal_L1_P0_rig bone_right 0 -10 0 head;
